<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>Including and excluding targets and features</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href="../assets/stylesheets/style.css" rel="stylesheet" />
    <script src="../assets/javascripts/all.js"></script>
  </head>
  <body class='reference_and_conventions 07_including_excluding'>
    <nav id='breadcrumbs'>
      <div class='breadcrumbs'>
        <ul>
          <li><a href="../index.html">Middlemac Help</a></li>
          <li><a href="index.html">Reference and Conventions</a></li>
          <li><a href="07_including_excluding.html">Including and excluding targets and features</a></li>
        </ul>
      </div>
    </nav>
    <div class='container-logo-medium'>
      <div>
        <div class='yield-content'>
          
          <h1 id="including-and-excluding-targets-and-features">Including and excluding targets and features</h1>
          
          <p>A reference of how to use targets and features in more detail than that provided in the Basics section.</p>
          
          <h2 id="why-include-and-exclude">Why include and exclude?</h2>
          
          <p>Although <em>Middlemac</em> is an excellent tool for developing single-target Apple
          Helpbooks, it really shines when you want to develop multiple versions of
          helpbooks for multiple versions of your application.</p>
          
          <p>Delivering a help system tailored <em>specifically</em> for the version of the
          application that it belongs to will increase user satisfaction by allowing them
          to focus on the aspects of the help that’s applicable to them. No one wants to
          attempt to solve a problem and then learn, during troubleshooting, that some
          fancy feature is only available in some other version of your application.</p>
          
          <p>You want to promote other versions of your application, certainly. Multiple
          targets allows you appropriately place upsell messages without distracting
          your users. It also allows you to avoid upselling the users who are already
          using your premium or top-level version.</p>
          
          <p>Maybe your application is available on your website and also the Mac App Store?
          In this case there are certainly going to be feature differences. You web
          version uses <em>Sparkle</em> for updates, but the MAS version doesn’t. Your MAS
          version requires users to authorize writing to user directories because of
          sandboxing, whereas your web-distributed version does not.</p>
          
          <p>Make your help files as polished as your applications, and users will be happy
          and delighted without even really knowing why!</p>
          
          <h2 id="include-and-exclude-concepts">Include and exclude concepts</h2>
          
          <p>In the simplest case you have help page that is present for all versions of your
          helpbook, but some of the content will be different for different targets and
          features. You’ve already seen how <a title="Targets overview" href="../basics_and_first_steps/07_targets_overview.html"><code>target_name?</code></a> and 
          <a title="Features overview" href="../basics_and_first_steps/08_features_overview.html"><code>target_feature?</code></a> can be used to show and hide specific
          content on each page.</p>
          
          <p>In the case of wanting to hide or show entire pages based on target or feature,
          you’ve also seen the <code>target</code> and <code>exclude</code> frontmatter keys. When used, you
          have excellent control over whether entire pages are visible or not.</p>
          
          <p>However there’s a potential issue with this strategy: You see, <em>Middleman</em> will
          output every buildable file in your project to the output build directory,
          whether it applies to your target or not. Currently there is no way to configure
          <em>Middleman</em> to work in a different manner.</p>
          
          <p>One might be forgiven for thinking that it’s not important; as long as these
          pages are hidden in navigation, the user will never find them anyway. And what
          importance is a couple of extra K in your help bundle size?</p>
          
          <p><code>hiutil</code> is the reason that it’s important. This is the tool that <em>Middlemac</em>
          runs after <em>Middleman</em> builds your output. It’s the Apple help Indexing
          utility, and it generates the index that allows users to search help. Now you
          can see the issue: if hidden content is indexed, the user can still get to it!</p>
          
          <p>Therefore we have to implement a two-pronged approach. If you want to exclude
          entire pages, you will have to use the frontmatter keys to hide it from
          navigation, <em>and also</em> use the helpers to ensure that when <em>Middleman</em> builds
          your file, it produces only a blank HTML document.</p>
          
          <p class="note">Note: If you’re building on Linux, <em>Middlemac</em> detects that <code>hiutil</code> is not
          present and will leave the last-built help index, if any, alone. If there’s no
          previous help index, one will not be created. After all, although <em>Middlemac</em>
          is intended for Mac OS X help files, there’s no saying you can’t use it for
          iOS help or even standard web pages.</p>
          <hr>
          <div class='navigate_prev_next'>
            <a href="06_frontmatter_keys.html">Previous</a>
            <a href="08_partials_reference.html">Next</a>
          </div>
        </div>
      </div>
      <div>
        <div>
          <img alt="logo" src="../../shared/icon_256x256@2x.png" />
        </div>
        <div class='related_topics'>
          <h1>Related Topics</h1>
          <ul>
            <li><a href="01_directory_and_image_conventions.html">Directory, filename, and image organization conventions</a></li>
            <li><a href="02_paths_conventions.html">Path reference conventions</a></li>
            <li><a href="03_layout_template_conventions.html">Layout and template conventions</a></li>
            <li><a href="04_middlemac_cli_reference.html">Middlemac command line reference</a></li>
            <li><a href="05_config_rb_reference.html">config.rb reference</a></li>
            <li><a href="06_frontmatter_keys.html">Frontmatter and keys</a></li>
            <li><a href="08_partials_reference.html">Partials reference</a></li>
            <li><a href="09_helpers_reference/index.html">Helpers and  methods reference</a></li>
            <li><a href="10_apple_help_setup.html">Apple .help bundle setup</a></li>
            <li><a href="11_using_local_data.html">Using local data</a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
