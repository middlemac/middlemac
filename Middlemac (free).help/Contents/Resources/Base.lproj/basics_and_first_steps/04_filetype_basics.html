<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>Filetype basics</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href="../assets/stylesheets/style.css" rel="stylesheet" />
    <script src="../assets/javascripts/all.js"></script>
  </head>
  <body class='basics_and_first_steps 04_filetype_basics'>
    <nav id='breadcrumbs'>
      <div class='breadcrumbs'>
        <ul>
          <li><a href="../index.html">Middlemac Help</a></li>
          <li><a href="index.html">Basics and First Steps</a></li>
          <li><a href="04_filetype_basics.html">Filetype basics</a></li>
        </ul>
      </div>
    </nav>
    <div class='container-logo-medium'>
      <div>
        <div class='yield-content'>
          
          <h1 id="filetype-basics">Filetype basics</h1>
          
          <p><em>Middleman</em> uses several filetypes to get its job done. An understanding of their differences is important to your successful use of <em>Middlemac</em>.</p>
          
          <p>Although you can use static <code>.html</code> files to build your helpbook, you would be
          sacrificing a lot of <em>Middleman</em>’s utility to do so, because static html is
          simply copied to your build directory as-is, with no opportunity to take
          advantages of the infrastructure that <em>Middleman</em> and <em>Middlemac</em> offer you.
          Instead you will probably chose a combination of <code>.haml</code>, <code>.md</code>, and <code>.erb</code>
          files, and even combinations of them in a single file!</p>
          
          <h2 id="filetype-extensions">Filetype extensions</h2>
          <p>As distributed, <em>Middleman</em> (and thus <em>Middlemac</em>) understand several file type
          extensions and will process them accordingly.</p>
          
          <dl>
            <dt><code>.html</code></dt>
            <dd>HTML files are regarded as already processed, and they will be copied
          verbatim to the build directory.</dd>
            <dt><code>.erb</code></dt>
            <dd>Embedded Ruby files are files that contain Ruby code embedded in them. This
          is useful for including simple if/else logic and including partials and
          using helpers. Ruby code is delimited within <code>&lt;% %&gt;</code> (generates no output)
          or <code>&lt;%= %&gt;</code> (does generate output) tags.</dd>
            <dt><code>.haml</code></dt>
            <dd>The “HTML abstraction markup language” excels at enforcing structure in your
          HTML-target documents, and is clutter-free and easy to read. It supports
          many built-in filters for including content in Ruby, Markdown, raw source
          code, and more. <em>Middlemac</em>’s templates, layouts, and partials are written
          in HAML.</dd>
            <dt><code>.md</code></dt>
            <dd>Markdown is a plain-text formatting syntax that is exceedingly easy to read
          and write in its source form, and mostly internally logically consistent.
          <em>Middlemac</em> uses <a href="http://kramdown.gettalong.org/">kramdown</a> as its
           text-to-HTML engine, and offers several useful features not found in
           plain vanilla Markdown.</dd>
            <dt><code>.scss</code></dt>
            <dd>“Sassy” CSS files use SASS markup and render into standard <code>.css</code> files.
          You can use SASS as you see fit; it’s fully compatible with CSS, and all
          CSS is valid SCSS. Why “SASS” and “SCSS”? SASS is the name of the project
          as well as an older, non-CSS compatible format. So, SASS is the project,
          and SCSS is the file format.</dd>
          </dl>
          
          <h2 id="files-with-leading-underscore">Files with leading underscore</h2>
          
          <p>Regardless of the file type, files with a leading underscore (“_”) will be
          processed by <em>Middleman</em> (if it’s a type that <em>Middleman</em> recognizes), but
          <em>will not</em> be copied to your build directory. An example of this type of file
          is a partial, which we want <em>Middleman</em> to process and make ready for use, but
          which we don’t want copied to the output directory because its content will be
          included in other files that need it.</p>
          
          <h2 id="filetype-chaining">Filetype chaining</h2>
          <p><em>This</em> is what’s cool about the <em>Middleman</em> build system: files are chained
          and processed multiple times by multiple processing systems, with the end
          result of producing the final file format. What does this mean? Let’s look at
          this example:</p>
          
          <p><code>hello_world.html.erb</code></p>
          
          <p>Middleman will produce a file (that’s then copied to the build output) named
          <code>hello_world.html</code> after processing it as an <code>.erb</code> file. For example:</p>
          
          <pre class="highlight html"><code><span class="nt">&lt;body&gt;</span>&#x000A;   <span class="nt">&lt;p&gt;</span><span class="err">&lt;</span>%= hello_world_function %&gt;<span class="nt">&lt;/p&gt;</span>&#x000A;<span class="nt">&lt;/body&gt;</span>&#x000A;</code></pre>
          
          <p>Will produce a <code>hello_world.html</code> file containing this (assuming that
          <code>hello_world_function</code> exists):</p>
          
          <pre class="highlight html"><code><span class="nt">&lt;body&gt;</span>&#x000A;   <span class="nt">&lt;p&gt;</span>Hello, world!<span class="nt">&lt;/p&gt;</span>&#x000A;<span class="nt">&lt;/body&gt;</span>&#x000A;</code></pre>
          
          <p>What if we try this?</p>
          
          <p><code>hello_world.html.md.erb</code></p>
          
          <pre class="highlight markdown"><code><span class="gh"># Introduction</span>&#x000A;<span class="err">&lt;</span>%= hello_world_function %&gt;&#x000A;</code></pre>
          
          <p>Accounting for removing all of the HTML head section, etc., we end up with:</p>
          
          <pre class="highlight html"><code><span class="nt">&lt;body&gt;</span>&#x000A;   <span class="nt">&lt;h1&gt;</span>Introduction<span class="nt">&lt;/h1&gt;</span>&#x000A;   <span class="nt">&lt;p&gt;</span>Hello, world!<span class="nt">&lt;/p&gt;</span>&#x000A;<span class="nt">&lt;/body&gt;</span>&#x000A;</code></pre>
          
          <p>It’s important to understand that file type chaining works from right to left.
          The last extension is processed first, then the penultimate extension, then the
          antepenultimate extension, etc.</p>
          
          <p>If you try to use a file named <code>hello_world.html.erb.md</code> then the results will
          be unexpected. Markdown will encounter <code>&lt;% %&gt;</code> tag-sets and attempt to render
          them in HTML. When the ERB processor is passed the file, it will no longer
          encounter the tag-sets with the embedded Ruby.</p>
          
          <h2 id="haml-rarely-needs-to-be-chained">HAML rarely needs to be chained</h2>
          
          <p>HAML includes filters and support for Ruby directly, and so it rarely needs to
          be chained. For example:</p>
          
          <pre class="highlight haml"><code><span class="nt">%h1</span> Introduction&#x000A;<span class="nt">%p</span><span class="p">=</span> <span class="n">hello_world_function</span>&#x000A;<span class="p">-</span> <span class="k">if</span> <span class="kp">true</span> <span class="o">==</span> <span class="kp">true</span>&#x000A;  <span class="nt">%p</span> Well, duh.&#x000A;<span class="nt">%p</span>&#x000A;  <span class="nd">:markdown&#x000A;</span>    <span class="ge">_Today_</span>a computer told me “Hello, world.” It was <span class="gs">**only**</span> addressing me,&#x000A;    and so I don’t know why it addressed me as the whole world.&#x000A;</code></pre>
          
          <p>The use of <code>=</code> in the <code>%p=</code> tag is a flag that indicates HAML should be
          expecting Ruby code. Likewise, the solitary <code>-</code> indicates Ruby code and will not
          generate output. The use of <code>:markdown</code> indicates that Markdown-formatted text
          will be used.</p>
          
          <p>This might make you think that HAML is a Swiss Army knife, and why bother with
          other filetypes? Test it: once you’re familiar with the all of the basics,
          try coming back to this page’s source and convert if from <code>.html.md.erb</code> to
          <code>.html.haml</code>, and then choose whichever works for you.</p>
          <hr>
          <div class='navigate_prev_next'>
            <a href="03_Configure_your_help_project.html">Previous</a>
            <a href="05_middleman_basics.html">Next</a>
          </div>
        </div>
      </div>
      <div>
        <div>
          <img alt="logo" src="../../shared/icon_256x256@2x.png" />
        </div>
        <div class='related_topics'>
          <h1>Related Topics</h1>
          <ul>
            <li><a href="01_middlemac_workflow.html">Middlemac workflow</a></li>
            <li><a href="02_technology_and_skills_overview.html">Technology and skills overview</a></li>
            <li><a href="03_Configure_your_help_project.html">Configure your help project</a></li>
            <li><a href="05_middleman_basics.html">Middleman basics</a></li>
            <li><a href="06_middlemac_command_line_overview.html">Middlemac command line overview</a></li>
            <li><a href="07_targets_overview.html">Targets overview</a></li>
            <li><a href="08_features_overview.html">Features overview</a></li>
            <li><a href="09_groups_overview.html">Groups overview</a></li>
            <li><a href="10_built_in_features/index.html">Built-in features</a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
